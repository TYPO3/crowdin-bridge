<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crowdin TYPO3 Status {date}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="test.css"/>
</head>
<body>


<div class="page-wrapper">
    <header class="page-header">
        <nav class="navbar navbar-mainnavigation navbar-dark bg-darkest navbar-expand-md" role="banner">
            <div class="container">
                <span class="navbar-brand"><i
                    class="fab fa-typo3 text-primary"></i> <strong>TYPO3 Crowdin Bridge</strong> &middot; <small>(Last rendering: {date})</small></span>
                <div class="collapse navbar-collapse" id="mainnavigation">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a target="_blank"
                               href="https://docs.typo3.org/m/typo3/reference-coreapi/master/en-us/ApiOverview/Internationalization/TranslationServer/Crowdin.html"
                               class="nav-link">

                                <span class="nav-item-icon"><i class="fa fa-question-circle"></i></span>

                                <span class="nav-item-label">Documentation</span>

                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main class="page-main">

        <div class="content-section">
            <div class="container">

                <h3 id="projects">Usable projects ({countUsableProjects})</h3>
                <div class="card">
                    <div class="datatable">
                        <table class="datatable-table">
                            <thead>
                            <tr>
                                <th></th>
                                <f:for each="{coreProject.languages}" as="language" key="key">
                                    <th>{key}</th>
                                </f:for>
                            </tr>
                            </thead>
                            <tbody>
                            <f:render section="singleProject" arguments="{project:coreProject}"/>

                            <f:for each="{usableProjects}" as="project">
                                <f:render section="singleProject" arguments="{project:project}"/>
                            </f:for>
                            </tbody>
                        </table>
                    </div>
                </div>

                <f:if condition="{notUsableProjects}">
                    <h3 id="todo">Unfinished projects ({notUsableProjects -> f:count()})</h3>
                    <div class="card">
                        <div class="datatable">
                            <table class="datatable-table">
                                <thead>
                                <tr>
                                    <th>Name</th>
                                </tr>
                                </thead>
                                <tbody>

                                <f:for each="{notUsableProjects}" as="project">
                                    <tr>
                                        <td><a href="https://crowdin.com/project/{project.crowdinKey}" target="_blank"
                                               rel="noopener">{project.extensionKey}</a></td>
                                    </tr>
                                </f:for>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </f:if>
            </div>
        </div>


    </main>

    <footer class="page-footer">
        <div class="content-section content-section-smallest bg-darkest text-white">
            <div class="container">
                <!--                <div class="page-footer-copyright">-->
                <!--                    <span>Â© 2019 <a href="https://typo3.com" target="_blank">TYPO3 GmbH</a>.</span>-->
                <!--                </div>-->
                <div class="page-footer-menu">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a target="_blank" rel="noopener" class="nav-link" href="https://typo3.org/legal-notice/">Legal
                                notice</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
</div>


<f:section name="singleProject">
    <tr>
        <th>
            <f:if condition="{project.crowdinKey} == 'typo3-cms'">
                <f:then>
                    TYPO3 Core
                </f:then>
                <f:else>
                    <a href="https://extensions.typo3.org/extension/{project.extensionKey}/"
                       target="_blank" rel="noopener">
                        <strong> {project.extensionKey}</strong>
                    </a>
                </f:else>
            </f:if>
            <br>
            <small> <a href="https://crowdin.com/project/{project.crowdinKey}" target="_blank"
                       rel="noopener">
                Crowdin
            </a></small>
        </th>
        <f:for each="{project.languages}" as="language">
            <td>
                <span class="badge {f:render(section:'translationStatus',arguments:{status:language})}">{language}</span>
            </td>
        </f:for>
    </tr>
</f:section>

<f:section name="translationStatus">
    <f:if condition="{status} == -">
        <f:then>badge-light</f:then>
        <f:else>
            <f:if condition="{status} == 100">
                badge-ok badge-perfect
            </f:if>
            <f:if condition="{status} < 40">
                <f:then>badge-danger</f:then>
                <f:else>
                    <f:if condition="{status} > 80">
                        <f:then>badge-success</f:then>
                        <f:else>badge-info</f:else>
                    </f:if>
                </f:else>
            </f:if>
        </f:else>
    </f:if>
</f:section>

</body>
</html>
